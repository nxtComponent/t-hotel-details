<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../font-roboto/roboto.html">
<link rel="import" href="../iron-icons/communication-icons.html">
<link rel="import" href="../iron-icons/social-icons.html">
<link rel="import" href="../iron-icons/notification-icons.html">
<link rel="import" href="star-rating.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-tabs/paper-tabs.html">
<link rel="import" href="../paper-tabs/paper-tab.html">
<link rel="import" href="../paper-menu-button/paper-menu-button.html">
<link rel="import" href="hotel-details-styles.html">
<!-- copied from spec


price = {
    bookPrice : '$402',
    originalPrice : '$459'
    discount : '25%'
  }

  // Default value for resource
  resource = {
    discountLabel= "discount",
    priceAriaLabel = "Price starting from",
    priceLabel = "starting from",
    buttonLabel = "RESERVE"
  }
  <t-hotel-details-heading
      title="String"
      sub-title = "String"
      rating="4"
      phone=""
      miles=""
      price = [[price]]
      resource = [[resource]]>
  </t-hotel-details-heading>

   -->
<dom-module id="hotel-details">
    <template>
        <custom-style>
            <style include="hotel-details-styles">
            :host{

                --rating-icon-size: 20px;
                --rating-icon-padding: 0px;
            }

            iron-icon {
                width: 20px;
                height: 20px;
                color: var(--shade-semidark);
            }

            a {
                text-decoration: none;
                speak-numeral: digits;
            }
            /*a[href^="tel:"]:before {
            content: "\260E";
            display: inline-block;
            margin-right: 0.5em;
        }*/

            [icon="communication:location-on"] {
                color: var(--link-color);
            }


            .right-container {
                display: none;
            }

            @media (min-width: 550px) {
                .row-md {
                    @apply --layout-wrap;
                }
                .align-end {
                    @apply --layout-end;
                }
                .right-container {
                    display: block;
                }
                .left-container {
                    flex: 1 1 300px;
                }
                .row-justified {
                    @apply --layout-justified;
                }
                h2 {
                    margin-right: 20px;
                }
                .discount {
                    background: var(--app-red-color);
                    padding: 5px;
                    color: var(--discount-color, #fff);
                    border-radius: 2px;
                    line-height: 30px;
                }
                .originalPrice {
                    font-size: 16px;
                    text-decoration: line-through;
                }
                .bookPrice {
                    font-size: 24px;
                    line-height: 1.2;
                    color: var(--app-red-color);
                    font-weight: bold;
                }
            }
            @media (min-width: 1024px){
                h2{
                  font-size: 24px;
                  font-weight: 400;
                }
                p,
                a,
                dl,
                dt:not(.resource-label),
                dd {
                    font-size: 16px;
                }
            }
            .header-row{
                @apply --layout-start;
            }
            .icons-header {
                height: 30px;
                margin-left: 10px;
            }
            .icons-header paper-icon-button{
                padding: 3px;
                border-radius: 50%;
                color: var(--shade-light);
                width: 30px;
                height: 30px;
                margin: 0;
            }
            .icons-header .favorite[active=""] {
                color: var(--app-red-color);
            }
            .header-menu-button {
                padding: 0;
                color: var(--shade-light);
                margin-left: 5px;
            }

            .header-menu-button iron-icon{
                margin-right: 5px;
            }
            </style>
        </custom-style>
        <div class="row row-justified">
            <div class="left-container">
                <div class="row header-row">
                    <div class="row-md margin-b">
                        <h2 class="margin-b">[[hotel.name]]</h2>
                        <star-rating  rating="[[hotel.rating]]"></star-rating>
                    </div>
                    <div class="icons-header row flex">
                        <paper-icon-button class="favorite" icon="favorite" toggles></paper-icon-button>
                        <paper-menu-button horizontal-offset="-135" vertical-offset="0" class="header-menu-button">
                          <paper-icon-button icon="social:share" slot="dropdown-trigger" alt="menu"></paper-icon-button>
                          <paper-listbox slot="dropdown-content">
                            <paper-item>
                                <iron-icon icon="content-copy"></iron-icon>
                                Copy link
                            </paper-item>
                            <paper-item>
                                <iron-icon icon="communication:message"></iron-icon>
                                Messenger
                            </paper-item>
                            <paper-item>
                                <iron-icon icon="mail"></iron-icon>
                                Email
                            </paper-item>
                        </paper-menu-button>
                    </div>
                </div>
                <p class="margin-b">[[hotel.address]]</p>
                <div class="row">
                    <a aria-label="[[resource.telephone]]" href="tel:[[phoneNumber]]" class="row margin-r">
                        <iron-icon icon="communication:call"></iron-icon>
                        <span class="margin-l">
                          [[hotel.phoneNumber]]
                        </span>
                    </a>
                    <template is="dom-if" if="{{hotel.distance}}">
                        <dl class="row">
                            <dt>[[resource.cityCenterText]]:&nbsp;</dt>
                            <dd>[[hotel.distance]] [[resource.unitMile]]</dd>
                        </dl>
                    </template>
                    <a href="#" role="button" class="margin-l">
                        <iron-icon icon="communication:location-on" on-click="_fireMapClick"> </iron-icon>
                    </a>
                </div>
            </div>
            <div class="right-container">
                <div class="row  align-end">
                    <dl class="row margin-r align-end">
                        <div>
                            <dt hidden>[[resource.discountLabel]]</dt>
                            <dd class="margin-r-small" aria-label="[[resource.discountLabel]]">
                                <span class="discount">-[[price.discount]]</span>
                            </dd>
                        </div>
                        <div>
                            <dt aria-hidden="true" class="margin-b resource-label text-right">
                                [[resource.priceLabel]]
                            </dt>
                            <dd aria-label="[[priceAriaLabel]]" class="row">
                                <span aria-hidden="true" class="originalPrice margin-r-small">[[price.originalPrice]]</span>
                                <span class="bookPrice">[[price.bookPrice]]</span>
                            </dd>
                        </div>
                    </dl>
                    <paper-button raised class="primary-btn">[[resource.buttonLabel]]</paper-button>
                </div>
            </div>
        </div>
    </template>
    <script>
    /**
     * `hotel-details`
     * The travelnxt details page
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class HotelDetails extends Polymer.Element {
        static get is() {
            return 'hotel-details';
        }
        static get properties() {
            return {

                resource: {
                  type: Object
                },
                // the price object to populate the pricing
                price: {
                    type: Object
                },
                /**
                 * hotel object
                 */
                hotel: {
                    type: Object,
                    value: {}
                }
            };
        }
        _fireMapClick(e) {
            e.preventDefault();
            document.querySelector('t-hotel-map')._showThumbnail = false;
            this.dispatchEvent(new CustomEvent('map-icon-clicked'));
        }

        _fireReserveClick(e) {
            this.dispatchEvent(new CustomEvent('reserve-button-clicked'));
        }
    }

    window.customElements.define(HotelDetails.is, HotelDetails);
    </script>
</dom-module>
